#BUILD_FOR_CORESYSTEM=1
TOP = ..\..\..\..

_NT_TARGET_VERSION=$(_NT_TARGET_VERSION_WIN7)
#TARGET_DESTINATION=win7

TARGETNAME=moftool
TARGETTYPE=PROGRAM
TARGET_DESTINATION=WINOMI\tests\bin

UMENTRY=main
UMTYPE=console

USE_MSVCRT=1
USE_STL=1
USE_NATIVE_EH=1

C_DEFINES=$(C_DEFINES)  \
	/DMI_INTERNAL \
	/DWINBUILD \
	/D_UNICODE \
	/DUNICODE \
	/DCONFIG_ENABLE_WCHAR \
	/DMI_CONST= \

SOURCES = \
	main.cpp \
	DefaultResource.rc # Autogenerated file name + version for Device Guard whitelisting effort

INCLUDES=$(INCLUDES); \
	$(TOP); \
	$(TOP)\common; \
	$(TOP)\common\windows; \
	$(TOP)\codec\mof\parser; \

TARGETLIBS= \
    $(SDK_LIB_PATH)\kernel32.lib \
    $(SDK_LIB_PATH)\mi.lib \
    $(OBJECT_ROOT)\admin\wmi\winomi\codec\mof\parser\$O\mofparser.lib \
    $(OBJECT_ROOT)\admin\wmi\winomi\base\$O\base.lib \
    $(ADMIN_LIB_PATH)\pal.lib \
    $(OBJECT_ROOT)\admin\wmi\winomi\tests\codec\mof\util\$O\moftestutil.lib \
    $(OBJECT_ROOT)\admin\wmi\winomi\codec\mof\blue\$O\mimofcodec.lib \
!ifdef TEST_BUILD
    $(ADMIN_LIB_PATH)\nitsdll.lib \
!endif

DLLDEF_OBJECTS= \
    $(ADMIN_LIB_PATH)\nitsstub.obj \

# Autogenerated. Sets file name for Device Guard whitelisting effort, used in RC.exe.
C_DEFINES=$(C_DEFINES) -D___TARGETNAME="""$(TARGETNAME).$(TARGETTYPE)"""
MUI_VERIFY_NO_LOC_RESOURCE=1
